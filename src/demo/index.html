<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Angular Resizable</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <link href='https://rawgit.com/Reklino/gromlicons/master/style.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script> -->

</head>

<body ng-app="angularResizable">

        <!--             <nav resizable r-directions="['right']">
                <span class="icon-big icon_expand-1"></span>
                <br />
                <br />
                <h1>
              Angular
              Resizable
            </h1>
                <p>
                    A teensy weensy directive for creating resizable containers.
                </p>
            </nav> -->
        
        <div class="toolbar">
            <ul></ul>
        </div>
    

        <div class="content">
            <div class="row" resizable r-directions="['bottom']" r-flex="true">
                <section resizable r-directions="['right']" r-flex="true">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3>Panel 1</h3>
                            <div class="panel-control">
                                <a class="close-control" href="#"><span class="glyphicon glyphicon-remove"></span></a>
                                <a href="#" class="maximize-control"><span class="glyphicon glyphicon-resize-full"></span></a>
                            </div>
                        </div>
                        <div class="panel-body">
                            <!-- <iframe src="http://www.cnn.com" frameborder="0"></iframe> -->
                        </div>
                    </div>
                </section>
                <section resizable r-directions="['right']" r-flex="true">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <h3>Panel 2</h3>
                            <div class="panel-control">
                                <a class="close-control" href="#"><span class="glyphicon glyphicon-remove"></span></a>
                                <a href="#" class="maximize-control"><span class="glyphicon glyphicon-resize-full"></span></a>
                            </div>
                        </div>
                        <div class="panel-body">
                            <!-- <iframe src="http://www.cnn.com" frameborder="0"></iframe> -->
                        </div>
                    </div>
                </section>
                <section>
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <h3>Panel 3</h3>
                            <div class="panel-control">
                                <a class="close-control" href="#"><span class="glyphicon glyphicon-remove"></span></a>
                                <a href="#" class="maximize-control"><span class="glyphicon glyphicon-resize-full"></span></a>
                            </div>
                        </div>
                        <div class="panel-body">
                            <!-- <iframe src="http://www.cnn.com" frameborder="0"></iframe> -->
                        </div>
                    </div>
                </section>
            </div>
            <div class="row">
                <section resizable r-directions="['right']" r-flex="true">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3>Panel 4</h3>
                            <div class="panel-control">
                                <a class="close-control" href="#"><span class="glyphicon glyphicon-remove"></span></a>
                                <a href="#" class="maximize-control"><span class="glyphicon glyphicon-resize-full"></span></a>
                            </div>
                        </div>
                        <div class="panel-body">
                            <!-- <iframe src="http://www.cnn.com" frameborder="0"></iframe> -->
                        </div>
                    </div>
                </section>
                <section resizable r-directions="['right']" r-flex="true">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h3>Panel 5</h3>
                            <div class="panel-control">
                                <a class="close-control" href="#"><span class="glyphicon glyphicon-remove"></span></a>
                                <a href="#" class="maximize-control"><span class="glyphicon glyphicon-resize-full"></span></a>
                            </div>
                        </div>
                        <div class="panel-body">
                            <!-- <iframe src="http://www.cnn.com" frameborder="0"></iframe> -->
                        </div>
                    </div>
                </section>
            </div>
        </div>

    <script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js'></script>
    <script src="js/index.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>


    <script>
       /* var mainApp = angular.module('angularResizable1',['angularResizable']);
        mainApp.directive('mpanel',function(){
            return {
                restrict: "E",
                template: '<div class="panel panel-info"><div class="panel-heading"><h3>Panel 1</h3><div class="panel-control"><a class="close" href="#"><span class="glyphicon glyphicon-remove"></span></a></div></div><div class="panel-body"><iframe src="http://www.cnn.com" frameborder="0"></iframe></div></div>'
            }
        })
*/

    </script>


    <script>
        $('.close-control').click(function(){
            var panelHeading = $(this).closest('.panel-control').prev('h3').text().toLowerCase();
            var refinedPanelHeading = panelHeading.replace(" ","_");
            var visiblePanels = $(this).closest('.row').children('section:visible').length;

            $(this).closest('section').attr('id',refinedPanelHeading);
            $(this).closest('section').hide();
            $('.toolbar ul').append('<li><a href="#" data-panelid="'+refinedPanelHeading+'">'+panelHeading+'</a></li>');

            if (visiblePanels === 1) {
                $(this).closest('.row').hide();
            }
            else {
                $(this).closest('.row').show();
            }

        });

        $('.maximize-control').click(function(){
            $(this).hide();
            $(this).closest('section').siblings('section').each(function(){
                var $thisSection = $(this);
                var panelHeading = $thisSection.find('h3').text().toLowerCase();
                var refinedPanelHeading = panelHeading.replace(" ","_");
                $thisSection.attr('id',refinedPanelHeading);
                $thisSection.hide();
                $('.toolbar ul').append('<li><a href="#" data-panelid="'+refinedPanelHeading+'">'+panelHeading+'</a></li>');
            });

            $(this).closest('.row').siblings('.row').each(function(){
                var $thisRow = $(this);

                $thisRow.children('section').each(function(){
                    var $thisSection = $(this); 
                    var panelHeading = $thisSection.find('h3').text().toLowerCase();
                    var refinedPanelHeading = panelHeading.replace(" ","_");
                    $thisSection.attr('id',refinedPanelHeading);
                    $thisSection.hide();
                    $('.toolbar ul').append('<li><a href="#" data-panelid="'+refinedPanelHeading+'">'+panelHeading+'</a></li>');
                })


            });

            $(this).closest('section').siblings('section').hide();
            $(this).closest('.row').siblings('.row').hide();

        });

        $('body').on('click','.toolbar a', function(){
            var panelID = $(this).data('panelid');
            console.log('panelID :'+panelID);
            $('#'+panelID).closest('.row').show();
            $('#'+panelID).show();
            $(this).closest('li').remove();
            $('.maximize-control').show();
        });


    </script>

</body>

</html>
